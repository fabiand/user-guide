<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>KubeVirt Latest | Creating Virtual Machines | Presets</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">

    <link href="../../latest/_stylesheets/asciibinder.css" rel="stylesheet" />

   <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
   <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
   <!--[if lt IE 9]>
     <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
     <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
   <![endif]-->

  <link href="../../latest/_images/favicon32x32.png" rel="shortcut icon" type="text/css">
  <!--[if IE]><link rel="shortcut icon" href="../../latest/_images/favicon.ico"><![endif]-->
  <meta content="AsciiBinder" name="application-name">
</head>
<body>
  <div class="navbar navbar-default" role="navigation">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="http://www.asciibinder.org/"><img alt="AsciiBinder" height="64px" src="../../latest/_images/KubeVirt_icon.png"></a>
      </div>
    </div>
  </div>
  <div class="container">
    <p class="toggle-nav visible-xs pull-left">
      <button class="btn btn-default btn-sm" type="button" data-toggle="offcanvas">Toggle nav</button>
    </p>
    <ol class="breadcrumb">
      <li class="sitename">
        <a href="../../index.html">Documentation</a>
      </li>
      <li class="hidden-xs active">
        <a href="../welcome/index.html">KubeVirt Latest</a>
      </li>
      <li class="hidden-xs active">
        <a href="../creating-virtual-machines/intro.html">Creating Virtual Machines</a>
      </li>
      
      <li class="hidden-xs active">
        Presets
      </li>
    </ol>
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-xs-8 col-sm-3 col-md-3 sidebar sidebar-offcanvas">
        <ul class="nav nav-sidebar">
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup0">
        <span id="tgSpan0" class="fa fa-angle-right"></span>Welcome
      </a>
      <ul id="topicGroup0" class="collapse  list-unstyled">
            <li><a class="" href="../welcome/index.html">Welcome</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup1">
        <span id="tgSpan1" class="fa fa-angle-right"></span>Release Notes
      </a>
      <ul id="topicGroup1" class="collapse  list-unstyled">
            <li><a class="" href="../release-notes/changelog.html">Changelog</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup2">
        <span id="tgSpan2" class="fa fa-angle-right"></span>Architecture
      </a>
      <ul id="topicGroup2" class="collapse  list-unstyled">
            <li><a class="" href="../architecture/virtual-machine.html">Virtual Machines</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup3">
        <span id="tgSpan3" class="fa fa-angle-right"></span>Installation & Administration
      </a>
      <ul id="topicGroup3" class="collapse  list-unstyled">
            <li><a class="" href="../administration/intro.html">Installation</a></li>
            <li><a class="" href="../administration/api-validation.html">Webhooks</a></li>
            <li><a class="" href="../administration/authorization.html">Authorization</a></li>
            <li><a class="" href="../administration/monitoring.html">Monitoring</a></li>
            <li><a class="" href="../administration/annotations_and_labels.html">Annotations and Labels</a></li>
            <li><a class="" href="../administration/unresponsive-nodes.html">Unresponsive node handling</a></li>
            <li><a class="" href="../administration/node-eviction.html">Node eviciton</a></li>
            <li><a class="" href="../administration/image-upload.html">Image upload</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup4">
        <span id="tgSpan4" class="fa fa-angle-down"></span>Creating Virtual Machines
      </a>
      <ul id="topicGroup4" class="collapse in list-unstyled">
            <li><a class="" href="../creating-virtual-machines/intro.html">Introduction</a></li>
            <li><a class="" href="../creating-virtual-machines/virtualized-hardware-configuration.html">Devices</a></li>
            <li><a class="" href="../creating-virtual-machines/disks-and-volumes.html">Disks and Volumes</a></li>
            <li><a class="" href="../creating-virtual-machines/interfaces-and-networks.html">Interfaces and Networks</a></li>
            <li><a class="" href="../creating-virtual-machines/dedicated-cpu.html">Guaranteed CPU usage</a></li>
            <li><a class="" href="../creating-virtual-machines/startup-scripts.html">cloud-init</a></li>
            <li><a class="" href="../creating-virtual-machines/guest-operating-system-information.html">Associating Guest Informations</a></li>
            <li><a class=" active" href="../creating-virtual-machines/presets.html">Presets</a></li>
            <li><a class="" href="../creating-virtual-machines/probes.html">Probes</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup5">
        <span id="tgSpan5" class="fa fa-angle-right"></span>Using Virtual Machines
      </a>
      <ul id="topicGroup5" class="collapse  list-unstyled">
            <li><a class="" href="../using-virtual-machines/usage.html">Usage</a></li>
            <li><a class="" href="../using-virtual-machines/life-cycle.html">Starting and Stopping</a></li>
            <li><a class="" href="../using-virtual-machines/graphical-and-console-access.html">Console Access (Serial and Graphical)</a></li>
            <li><a class="" href="../using-virtual-machines/assigning-vms-to-nodes.html">Node placement</a></li>
            <li><a class="" href="../using-virtual-machines/dns.html">DNS Integration</a></li>
            <li><a class="" href="../using-virtual-machines/expose-service.html">Service Integration</a></li>
            <li><a class="" href="../using-virtual-machines/create-networkpolicy.html">Assigning Network Policies</a></li>
            <li><a class="" href="../using-virtual-machines/overcommit.html">Memory over-commit</a></li>
            <li><a class="" href="../using-virtual-machines/virtual-machine-replica-set.html">Virtual Machine Replica Set</a></li>
            <li><a class="" href="../using-virtual-machines/vmctl.html">vmctl</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup6">
        <span id="tgSpan6" class="fa fa-angle-right"></span>Working with Templates
      </a>
      <ul id="topicGroup6" class="collapse  list-unstyled">
            <li><a class="" href="../templates/common-templates.html">Introduction</a></li>
            <li><a class="" href="../templates/using-templates.html">Using templates</a></li>
      </ul>
    </li>
</ul>
      </div>
      <div class="col-xs-12 col-sm-9 col-md-9 main">
        <div class="page-header">
          <h2>Presets</h2>
        </div>
        <div class="sect1">
<h2 id="presets"><a class="anchor" href="#presets"></a>Presets</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="what-is-a-virtualmachineinstancepreset"><a class="anchor" href="#what-is-a-virtualmachineinstancepreset"></a>What is a VirtualMachineInstancePreset?</h3>
<div class="paragraph">
<p><code>VirtualMachineInstancePresets</code> are an extension to general
<code>VirtualMachineInstance</code> configuration behaving much like <code>PodPresets</code>
from Kubernetes. When a <code>VirtualMachineInstance</code> is created, any
applicable <code>VirtualMachineInstancePresets</code> will be applied to the
existing spec for the <code>VirtualMachineInstance</code>. This allows for re-use
of common settings that should apply to multiple
<code>VirtualMachineInstances</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="create-a-virtualmachineinstancepreset"><a class="anchor" href="#create-a-virtualmachineinstancepreset"></a>Create a VirtualMachineInstancePreset</h3>
<div class="paragraph">
<p>You can describe a <code>VirtualMachineInstancePreset</code> in a YAML file. For
example, the <code>vmi-preset.yaml</code> file below describes a
<code>VirtualMachineInstancePreset</code> that requests a <code>VirtualMachineInstance</code>
be created with a resource request for 64M of RAM.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">VirtualMachineInstancePreset</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">small-qemu</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">selector</span>:
    <span style="color:#606">matchLabels</span>:
      <span style="color:#606">kubevirt.io/size</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">small</span></span>
  <span style="color:#606">domain</span>:
    <span style="color:#606">resources</span>:
      <span style="color:#606">requests</span>:
        <span style="color:#606">memory</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">64M</span></span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a <code>VirtualMachineInstancePreset</code> based on that YAML file:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">kubectl create -f vmipreset.yaml</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="required-fields"><a class="anchor" href="#required-fields"></a>Required Fields</h4>
<div class="paragraph">
<p>As with most Kubernetes resources, a <code>VirtualMachineInstancePreset</code>
requires <code>apiVersion</code>, <code>kind</code> and <code>metadata</code> fields.</p>
</div>
<div class="paragraph">
<p>Additionally <code>VirtualMachineInstancePresets</code> also need a <code>spec</code> section.
While not technically required to satisfy syntax, it is strongly
recommended to include a <code>Selector</code> in the <code>spec</code> section, otherwise a
<code>VirtualMachineInstancePreset</code> will match all <code>VirtualMachineInstances</code>
in a namespace.</p>
</div>
</div>
<div class="sect3">
<h4 id="virtualmachine-selector"><a class="anchor" href="#virtualmachine-selector"></a>VirtualMachine Selector</h4>
<div class="paragraph">
<p>KubeVirt uses Kubernetes <code>Labels</code> and <code>Selectors</code> to determine which
<code>VirtualMachineInstancePresets</code> apply to a given
<code>VirtualMachineInstance</code>, similarly to how <code>PodPresets</code> work in
Kubernetes. If a setting from a <code>VirtualMachineInstancePreset</code> is
applied to a <code>VirtualMachineInstance</code>, the <code>VirtualMachineInstance</code> will
be marked with an Annotation upon completion.</p>
</div>
<div class="paragraph">
<p>Any domain structure can be listed in the <code>spec</code> of a
<code>VirtualMachineInstancePreset</code>, e.g. Clock, Features, Memory, CPU, or
Devices such as network interfaces. All elements of the <code>spec</code> section
of a <code>VirtualMachineInstancePreset</code> will be applied to the
<code>VirtualMachineInstance</code>.</p>
</div>
<div class="paragraph">
<p>Once a <code>VirtualMachineInstancePreset</code> is successfully applied to a
<code>VirtualMachineInstance</code>, the <code>VirtualMachineInstance</code> will be marked
with an annotation to indicate that it was applied. If a conflict occurs
while a <code>VirtualMachineInstancePreset</code> is being applied, that portion of
the <code>VirtualMachineInstancePreset</code> will be skipped.</p>
</div>
<div class="paragraph">
<p>Any valid <code>Label</code> can be matched against, but it is suggested that a
general rule of thumb is to use os/shortname, e.g.
<code>kubevirt.io/os: rhel7</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="updating-a-virtualmachineinstancepreset"><a class="anchor" href="#updating-a-virtualmachineinstancepreset"></a>Updating a VirtualMachineInstancePreset</h4>
<div class="paragraph">
<p>If a <code>VirtualMachineInstancePreset</code> is modified, changes will <em>not</em> be
applied to existing <code>VirtualMachineInstances</code>. This applies to both the
<code>Selector</code> indicating which <code>VirtualMachineInstances</code> should be matched,
and also the <code>Domain</code> section which lists the settings that should be
applied to a <code>VirtualMachine</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="overrides"><a class="anchor" href="#overrides"></a>Overrides</h4>
<div class="paragraph">
<p><code>VirtualMachineInstancePresets</code> use a similar conflict resolution
strategy to Kubernetes <code>PodPresets</code>. If a portion of the domain spec is
present in both a <code>VirtualMachineInstance</code> and a
<code>VirtualMachineInstancePreset</code> and both resources have the identical
information, then creation of the <code>VirtualMachineInstance</code> will continue
normally. If however there is a difference between the resources, an
Event will be created indicating which <code>DomainSpec</code> element of which
<code>VirtualMachineInstancePreset</code> was overridden. For example: If both the
<code>VirtualMachineInstance</code> and <code>VirtualMachineInstancePreset</code> define a
<code>CPU</code>, but use a different number of <code>Cores</code>, KubeVirt will note the
difference.</p>
</div>
<div class="paragraph">
<p>If any settings from the <code>VirtualMachineInstancePreset</code> were
successfully applied, the <code>VirtualMachineInstance</code> will be annotated.</p>
</div>
<div class="paragraph">
<p>In the event that there is a difference between the <code>Domains</code> of a
<code>VirtualMachineInstance</code> and <code>VirtualMachineInstancePreset</code>, KubeVirt
will create an <code>Event</code>. <code>kubectl get events</code> can be used to show all
<code>Events</code>. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ kubectl get events
....
Events:
  FirstSeen                         LastSeen                        Count From                              SubobjectPath                Reason    Message
  2m          2m           1         myvmi.1515bbb8d397f258                       VirtualMachineInstance                                     Warning   Conflict                  virtualmachineinstance-preset-controller   Unable to apply VirtualMachineInstancePreset 'example-preset': spec.cpu: &amp;{6} != &amp;{4}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="usage"><a class="anchor" href="#usage"></a>Usage</h4>
<div class="paragraph">
<p><code>VirtualMachineInstancePresets</code> are namespaced resources, so should be
created in the same namespace as the <code>VirtualMachineInstances</code> that will
use them:</p>
</div>
<div class="paragraph">
<p><code>kubectl create -f &lt;preset&gt;.yaml [--namespace &lt;namespace&gt;]</code></p>
</div>
<div class="paragraph">
<p>KubeVirt will determine which <code>VirtualMachineInstancePresets</code> apply to a
Particular <code>VirtualMachineInstance</code> by matching <code>Labels</code>. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">VirtualMachineInstancePreset</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">example-preset</span></span>
  <span style="color:#606">selector</span>:
    <span style="color:#606">matchLabels</span>:
      <span style="color:#606">kubevirt.io/os</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">win10</span></span>
  <span style="color:#F00;background-color:#FAA">...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>would match any <code>VirtualMachineInstance</code> in the same namespace with a
<code>Label</code> of <code>flavor: foo</code>. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">VirtualMachineInstance</span></span>
<span style="color:#606">version</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">myvmi</span></span>
  <span style="color:#606">labels</span>:
    <span style="color:#606">kubevirt.io/os</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">win10</span></span>
  <span style="color:#F00;background-color:#FAA">...</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="conflicts"><a class="anchor" href="#conflicts"></a>Conflicts</h4>
<div class="paragraph">
<p>When multiple <code>VirtualMachineInstancePresets</code> match a particular
<code>VirtualMachineInstance</code>, if they specify the same settings within a
Domain, those settings must match. If two
<code>VirtualMachineInstancePresets</code> have conflicting settings (e.g. for the
number of CPU cores requested), an error will occur, and the
<code>VirtualMachineInstance</code> will enter the <code>Failed</code> state, and a <code>Warning</code>
event will be emitted explaining which settings of which
<code>VirtualMachineInstancePresets</code> were problematic.</p>
</div>
</div>
<div class="sect3">
<h4 id="matching-multiple-code-virtualmachineinstances-code"><a class="anchor" href="#matching-multiple-code-virtualmachineinstances-code"></a>Matching Multiple <code>VirtualMachineInstances</code></h4>
<div class="paragraph">
<p>The main use case for <code>VirtualMachineInstancePresets</code> is to create
re-usable settings that can be applied across various machines. Multiple
methods are available to match the labels of a <code>VirtualMachineInstance</code>
using selectors.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>matchLabels: Each <code>VirtualMachineInstance</code> can use a specific label
shared by all</p>
<div class="paragraph">
<p>instances.</p>
</div>
</li>
<li>
<p>matchExpressions: Logical operators for sets can be used to match
multiple</p>
<div class="paragraph">
<p>labels.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using matchLabels, the label used in the <code>VirtualMachineInstancePreset</code>
must match one of the labels of the <code>VirtualMachineInstance</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">selector</span>:
  <span style="color:#606">matchLabels</span>:
    <span style="color:#606">kubevirt.io/memory</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">large</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>would match</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">metadata</span>:
  <span style="color:#606">labels</span>:
    <span style="color:#606">kubevirt.io/memory</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">large</span></span>
    <span style="color:#606">kubevirt.io/os</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">win10</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">metadata</span>:
  <span style="color:#606">labels</span>:
    <span style="color:#606">kubevirt.io/memory</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">large</span></span>
    <span style="color:#606">kubevirt.io/os</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">fedora27</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Using matchExpressions allows for matching multiple labels of
<code>VirtualMachineInstances</code> without needing to explicity list a label.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">selector</span>:
  <span style="color:#606">matchExpressions</span>:
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">{key: kubevirt.io/os, operator: In, values: [fedora27, fedora26]}</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>would match both:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">metadata</span>:
  <span style="color:#606">labels</span>:
    <span style="color:#606">kubevirt.io/os</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">fedora26</span></span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">metadata</span>:
  <span style="color:#606">labels</span>:
    <span style="color:#606">kubevirt.io/os</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">fedora27</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The Kubernetes
<a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/">documentation</a>
has a detailed explanation. Examples are provided below.</p>
</div>
</div>
<div class="sect3">
<h4 id="exclusions"><a class="anchor" href="#exclusions"></a>Exclusions</h4>
<div class="paragraph">
<p>Since <code>VirtualMachineInstancePresets</code> use <code>Selectors</code> that indicate
which <code>VirtualMachineInstances</code> their settings should apply to, there
needs to exist a mechanism by which <code>VirtualMachineInstances</code> can opt
out of <code>VirtualMachineInstancePresets</code> altogether. This is done using an
annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">VirtualMachineInstance</span></span>
<span style="color:#606">version</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">myvmi</span></span>
  <span style="color:#606">annotations</span>:
    <span style="color:#606">virtualmachineinstancepresets.admission.kubevirt.io/exclude</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span>
  <span style="color:#F00;background-color:#FAA">...</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="examples"><a class="anchor" href="#examples"></a>Examples</h3>
<div class="sect3">
<h4 id="simple-code-virtualmachineinstancepreset-code-example"><a class="anchor" href="#simple-code-virtualmachineinstancepreset-code-example"></a>Simple <code>VirtualMachineInstancePreset</code> Example</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">VirtualMachineInstancePreset</span></span>
<span style="color:#606">version</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1alpha2</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">example-preset</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">selector</span>:
    <span style="color:#606">matchLabels</span>:
      <span style="color:#606">kubevirt.io/os</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">win10</span></span>
  <span style="color:#606">domain</span>:
    <span style="color:#606">features</span>:
      <span style="color:#606">acpi</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">{}</span></span>
      <span style="color:#606">apic</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">{}</span></span>
      <span style="color:#606">hyperv</span>:
        <span style="color:#606">relaxed</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">{}</span></span>
        <span style="color:#606">vapic</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">{}</span></span>
        <span style="color:#606">spinlocks</span>:
          <span style="color:#606">spinlocks</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">8191</span></span>
<span style="color:#f8f;background:#505"><span style="color:#f4f">---</span></span>
<span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">VirtualMachineInstance</span></span>
<span style="color:#606">version</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">myvmi</span></span>
  <span style="color:#606">labels</span>:
    <span style="color:#606">kubevirt.io/os</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">win10</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">domain</span>:
    <span style="color:#606">firmware</span>:
      <span style="color:#606">uuid</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">c8f99fc8-20f5-46c4-85e5-2b841c547cef</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Once the <code>VirtualMachineInstancePreset</code> is applied to the
<code>VirtualMachineInstance</code>, the resulting resource would look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">VirtualMachineInstance</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">annotations</span>:
    <span style="color:#606">presets.virtualmachineinstances.kubevirt.io/presets-applied</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
    <span style="color:#606">virtualmachineinstancepreset.kubevirt.io/example-preset</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
  <span style="color:#606">labels</span>:
    <span style="color:#606">kubevirt.io/os</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">win10</span></span>
    <span style="color:#606">kubevirt.io/nodeName</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">master</span></span>
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">myvmi</span></span>
  <span style="color:#606">namespace</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">default</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">domain</span>:
    <span style="color:#606">devices</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">{}</span></span>
    <span style="color:#606">features</span>:
      <span style="color:#606">acpi</span>:
        <span style="color:#606">enabled</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">true</span></span>
      <span style="color:#606">apic</span>:
        <span style="color:#606">enabled</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">true</span></span>
      <span style="color:#606">hyperv</span>:
        <span style="color:#606">relaxed</span>:
          <span style="color:#606">enabled</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">true</span></span>
        <span style="color:#606">spinlocks</span>:
          <span style="color:#606">enabled</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">true</span></span>
          <span style="color:#606">spinlocks</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">8191</span></span>
        <span style="color:#606">vapic</span>:
          <span style="color:#606">enabled</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">true</span></span>
    <span style="color:#606">firmware</span>:
      <span style="color:#606">uuid</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">c8f99fc8-20f5-46c4-85e5-2b841c547cef</span></span>
    <span style="color:#606">machine</span>:
      <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">q35</span></span>
    <span style="color:#606">resources</span>:
      <span style="color:#606">requests</span>:
        <span style="color:#606">memory</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">8Mi</span></span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="conflict-example"><a class="anchor" href="#conflict-example"></a>Conflict Example</h4>
<div class="paragraph">
<p>This is an example of a merge conflict. In this case both the
<code>VirtualMachineInstance</code> and <code>VirtualMachineInstancePreset</code> request
different number of CPU’s.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">VirtualMachineInstancePreset</span></span>
<span style="color:#606">version</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1alpha2</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">example-preset</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">selector</span>:
    <span style="color:#606">matchLabels</span>:
      <span style="color:#606">kubevirt.io/flavor</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">default-features</span></span>
  <span style="color:#606">domain</span>:
    <span style="color:#606">cpu</span>:
      <span style="color:#606">cores</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">4</span></span>
<span style="color:#f8f;background:#505"><span style="color:#f4f">---</span></span>
<span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">VirtualMachineInstance</span></span>
<span style="color:#606">version</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">myvmi</span></span>
  <span style="color:#606">labels</span>:
    <span style="color:#606">kubevirt.io/flavor</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">default-features</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">domain</span>:
    <span style="color:#606">cpu</span>:
      <span style="color:#606">cores</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">6</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case the <code>VirtualMachineInstance</code> Spec will remain unmodified.
Use <code>kubectl get events</code> to show events.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">VirtualMachineInstance</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">annotations</span>:
    <span style="color:#606">presets.virtualmachineinstances.kubevirt.io/presets-applied</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
  <span style="color:#606">generation</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">0</span></span>
  <span style="color:#606">labels</span>:
    <span style="color:#606">kubevirt.io/flavor</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">default-features</span></span>
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">myvmi</span></span>
  <span style="color:#606">namespace</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">default</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">domain</span>:
    <span style="color:#606">cpu</span>:
      <span style="color:#606">cores</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">6</span></span>
    <span style="color:#606">devices</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">{}</span></span>
    <span style="color:#606">machine</span>:
      <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#710">&quot;</span></span>
    <span style="color:#606">resources</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">{}</span></span>
<span style="color:#606">status</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">{}</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Calling <code>kubectl get events</code> would have a line like: 2m 2m 1
myvmi.1515bbb8d397f258 VirtualMachineInstance Warning Conflict
virtualmachineinstance-preset-controller Unable to apply
VirtualMachineInstancePreset `example-preset': spec.cpu: &amp;{6} != &amp;{4}</p>
</div>
</div>
<div class="sect3">
<h4 id="matching-multiple-virtualmachineinstances-using-matchlabels"><a class="anchor" href="#matching-multiple-virtualmachineinstances-using-matchlabels"></a>Matching Multiple VirtualMachineInstances Using MatchLabels</h4>
<div class="paragraph">
<p>These <code>VirtualMachineInstances</code> have multiple labels, one that is unique
and one that is shared.</p>
</div>
<div class="paragraph">
<p>Note: This example breaks from the convention of using os-shortname as a
<code>Label</code> for demonstration purposes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">VirtualMachineInstancePreset</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">twelve-cores</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">selector</span>:
    <span style="color:#606">matchLabels</span>:
      <span style="color:#606">kubevirt.io/cpu</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">dodecacore</span></span>
  <span style="color:#606">domain</span>:
    <span style="color:#606">cpu</span>:
      <span style="color:#606">cores</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">12</span></span>
<span style="color:#f8f;background:#505"><span style="color:#f4f">---</span></span>
<span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">VirtualMachineInstance</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">windows-10</span></span>
  <span style="color:#606">labels</span>:
    <span style="color:#606">kubevirt.io/os</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">win10</span></span>
    <span style="color:#606">kubevirt.io/cpu</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">dodecacore</span></span>
<span style="color:#606">spec</span>:
<span style="color:#f8f;background:#505"><span style="color:#f4f">---</span></span>
<span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">VirtualMachineInstance</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">windows-7</span></span>
  <span style="color:#606">labels</span>:
    <span style="color:#606">kubevirt.io/os</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">win7</span></span>
    <span style="color:#606">kubevirt.io/cpu</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">dodecacore</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">terminationGracePeriodSeconds</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">0</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Adding this <code>VirtualMachineInstancePreset</code> and these
<code>VirtualMachineInstances</code> will result in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">VirtualMachineInstance</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">annotations</span>:
    <span style="color:#606">presets.virtualmachineinstances.kubevirt.io/presets-applied</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
    <span style="color:#606">virtualmachineinstancepreset.kubevirt.io/twelve-cores</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
  <span style="color:#606">labels</span>:
    <span style="color:#606">kubevirt.io/cpu</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">dodecacore</span></span>
    <span style="color:#606">kubevirt.io/os</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">win10</span></span>
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">windows-10</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">domain</span>:
    <span style="color:#606">cpu</span>:
      <span style="color:#606">cores</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">12</span></span>
    <span style="color:#606">devices</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">{}</span></span>
    <span style="color:#606">resources</span>:
      <span style="color:#606">requests</span>:
        <span style="color:#606">memory</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">4Gi</span></span>
<span style="color:#f8f;background:#505"><span style="color:#f4f">---</span></span>
<span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">VirtualMachineInstance</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">annotations</span>:
    <span style="color:#606">presets.virtualmachineinstances.kubevirt.io/presets-applied</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
    <span style="color:#606">virtualmachineinstancepreset.kubevirt.io/twelve-cores</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
  <span style="color:#606">labels</span>:
    <span style="color:#606">kubevirt.io/cpu</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">dodecacore</span></span>
    <span style="color:#606">kubevirt.io/os</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">win7</span></span>
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">windows-7</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">domain</span>:
    <span style="color:#606">cpu</span>:
      <span style="color:#606">cores</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">12</span></span>
    <span style="color:#606">devices</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">{}</span></span>
    <span style="color:#606">resources</span>:
      <span style="color:#606">requests</span>:
        <span style="color:#606">memory</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">4Gi</span></span>
  <span style="color:#606">terminationGracePeriodSeconds</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">0</span></span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="matching-multiple-virtualmachineinstances-using-matchexpressions"><a class="anchor" href="#matching-multiple-virtualmachineinstances-using-matchexpressions"></a>Matching Multiple VirtualMachineInstances Using MatchExpressions</h4>
<div class="paragraph">
<p>This <code>VirtualMachineInstancePreset</code> has a matchExpression that will
match two labels: <code>kubevirt.io/os: win10</code> and <code>kubevirt.io/os: win7</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">VirtualMachineInstancePreset</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">windows-vmis</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">selector</span>:
    <span style="color:#606">matchExpressions</span>:
      - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">{key: kubevirt.io/os, operator: In, values: [win10, win7]}</span></span>
  <span style="color:#606">domain</span>:
    <span style="color:#606">resources</span>:
      <span style="color:#606">requests</span>:
        <span style="color:#606">memory</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">128M</span></span>
<span style="color:#f8f;background:#505"><span style="color:#f4f">---</span></span>
<span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">VirtualMachineInstance</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">smallvmi</span></span>
  <span style="color:#606">labels</span>:
    <span style="color:#606">kubevirt.io/os</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">win10</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">terminationGracePeriodSeconds</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">60</span></span>
<span style="color:#f8f;background:#505"><span style="color:#f4f">---</span></span>
<span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">VirtualMachineInstance</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">largevmi</span></span>
  <span style="color:#606">labels</span>:
    <span style="color:#606">kubevirt.io/os</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">win7</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">terminationGracePeriodSeconds</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">120</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Applying the preset to both VM’s will result in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">items</span>:
- <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">apiVersion: kubevirt.io/v1alpha2</span></span>
  <span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">VirtualMachineInstance</span></span>
  <span style="color:#606">metadata</span>:
    <span style="color:#606">annotations</span>:
      <span style="color:#606">presets.virtualmachineinstances.kubevirt.io/presets-applied</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
      <span style="color:#606">virtualmachineinstancepreset.kubevirt.io/windows-vmis</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
    <span style="color:#606">labels</span>:
      <span style="color:#606">kubevirt.io/os</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">win7</span></span>
    <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">largevmi</span></span>
  <span style="color:#606">spec</span>:
    <span style="color:#606">domain</span>:
      <span style="color:#606">resources</span>:
        <span style="color:#606">requests</span>:
          <span style="color:#606">memory</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">128M</span></span>
    <span style="color:#606">terminationGracePeriodSeconds</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">120</span></span>
- <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">apiVersion: kubevirt.io/v1alpha2</span></span>
  <span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">VirtualMachineInstance</span></span>
  <span style="color:#606">metadata</span>:
    <span style="color:#606">annotations</span>:
      <span style="color:#606">presets.virtualmachineinstances.kubevirt.io/presets-applied</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
      <span style="color:#606">virtualmachineinstancepreset.kubevirt.io/windows-vmis</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha2</span></span>
    <span style="color:#606">labels</span>:
      <span style="color:#606">kubevirt.io/os</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">win10</span></span>
    <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">smallvmi</span></span>
  <span style="color:#606">spec</span>:
    <span style="color:#606">domain</span>:
      <span style="color:#606">resources</span>:
        <span style="color:#606">requests</span>:
          <span style="color:#606">memory</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">128M</span></span>
    <span style="color:#606">terminationGracePeriodSeconds</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">60</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
      </div>
    </div>
  </div>
   <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
   <!-- Latest compiled and minified JavaScript -->
   <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
   <script src="../../latest/_javascripts/bootstrap-offcanvas.js" type="text/javascript"></script>
   <script type="text/javascript">
    /*<![CDATA[*/
    $(document).ready(function() {
      $("[id^='topicGroup']").on('show.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicGroup']").on('hide.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicSubGroup']").on('show.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
      $("[id^='topicSubGroup']").on('hide.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
    });
    /*]]>*/
  </script>
</body>
</html>